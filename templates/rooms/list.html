{% extends "base.html" %}
{% load custom_tags %}
{% block cssscript %}
{% load staticfiles %}
<link rel="stylesheet" href="{% static 'css/rooms/list.css' %}">
{% endblock cssscript %}
{% block content %}
<div class="title my-3 new jumbotron">
  <div class="main">
    Witaj w serwisie wsperającym inicjatywy społeczne.
  </div>
  <small>
    Poniżej znajdziesz wszystkie zbiórki. Wspieraj innych w zdobywaniu szczytów!
  </small>
</div>
<div id="trendy-panel" class="toggle-panel">
  Najważniejsze zbiórki
</div>
<div id="most-trendy" class="hidden">
  <div class="room-panel">
    <div class="room-list-title">
      Najwięcej darczyńców
    </div>
    <ul class="room-list">
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">135 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">135 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">135 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">135 USD </span>
      </li>
    </ul>
  </div>
  <div class="room-panel">
    <div class="room-list-title">
      Najwięcej zebrano
    </div>
    <ul class="room-list">
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">1000 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">855 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">698 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">789 USD </span>
      </li>
    </ul>
  </div>
  <div class="room-panel">
    <div class="room-list-title">
      Najwięcej zebrano
    </div>
    <ul class="room-list">
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">1000 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">855 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">698 USD </span>
      </li>
      <li class="list-item">
        <span class="founder">Prezent</span>
        <span class="amount">789 USD </span>
      </li>
    </ul>
  </div>
</div>
{% for room in rooms %}
<div class="room">
  <div class="row">
    <div class="col-6">
      <div class="description">
        <div class="d-flex justify-content-around">
          <div class="receiver">
            <div class="main-text">{{room.receiver}}</div>
            <div class="small-text">autor</div>
          </div>
          <div class="price">
            <div class="main-text">{{room.price}}</div>
            <div class="small-text">cena</div>
          </div>
        </div>
        <div class="line"></div>
        <div class="text-center">
          <div class="mt-4">Cel zbiórki:</div>
          <div class="important-text mb-4">{{room.gift}}</div>
        </div>
        <div class="line"></div>
        <div class="d-flex justify-content-around">
          <div class="receiver">
            <div class="main-text">{{room.percent_left}}</div>
            <div class="small-text">do zebrania</div>
          </div>
          <div class="price">
            <div class="main-text">{{room.num_patrons}}</div>
            <div class="small-text">liczba patronów</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-6">
      <div class="description">
        <div class="text">{{room.description}}</div>
        <div class="myBtn" role="group">
          <a href="{% url 'forum:list' pk=room.pk %}">
            <button type="button" class="half btn btn-outline-light">
              Napisz wiadomośc
            </button>
          </a>
          {% if request.user in room.observers.all %}
          <button type="button" name="{{room.pk}}" class="half btn btn-outline-light">
            Obserwujesz
          </button>
          {% else %}
          <button type="button" name="{{room.pk}}" class="observerBtn half btn btn-outline-light">
            Dodaj do obserwowanych
          </button>
          {% endif %}
        </div>
        <a href="{% url 'rooms:detail' pk=room.pk %}" id="patronBtn" class="btn btn-outline-success">
          Wesprzyj inicjatywę
        </a>
      </div>
    </div>
  </div>
</div>
{% endfor %}
{% endblock content%}
{% block javascript %}
  <script src="{% static 'js/rooms/list.js' %}"></script>
{% endblock javascript %}